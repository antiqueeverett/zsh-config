#!/bin/zsh


# -- using vim-like keys binds
bindkey -M menuselect 'h' vi-backward-char
bindkey -M menuselect 'k' vi-up-line-or-history
bindkey -M menuselect 'l' vi-forward-char
bindkey -M menuselect 'j' vi-down-line-or-history


# -- using CTRL-E for abrupt terminal-vim editing
autoload edit-command-line; zle -N edit-command-line
bindkey '^e' edit-command-line


# -- using ' for launching fzf
function ffind-file () {
file=$(find $HOME/Repositories -type f | fzf --height 25  --preview 'bat --style=numbers --color=always --line-range :100 {}')

if [ -z ${file} ]; then
    # if no file is selected, do nothing
    echo ""
else
    # if a file is selected, open with vim
    vim $file
fi
}
bindkey -s "\[" 'ffind-file\n'



# -- using " to open a directory with fzf
function ffind-dir () {
local file
local dir
file=$(find $HOME/Repositories -type f | fzf +m -q "$1") && dir=$(dirname "$file") && cd "$dir"
}
bindkey -s "\]" "ffind-dir\n"



# -- using ; to launch vim
function vim-launch () { vim; }
bindkey -s "\\" 'vim-launch\n'


# -- using Q to exit the terminal
function quick-exit () {
exit
zle accept-line
}
zle -N quick-exit # define widget from function

bindkey -M viins 'Q' quick-exit # bind widget to key in viins mode
bindkey -M vicmd 'Q' quick-exit # bind widget to Ctrl+X in vicmd mode




#bindkey -s "Q" 'quick-exit\n'
